{"ast":null,"code":"var _jsxFileName = \"/Users/kristinabelyakova/react-auth/front/src/components/Signup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Signup(props) {\n  _s();\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const first_password = useRef();\n  const repeat_password = useRef();\n  const reg1 = new RegExp(/[^A-Z-a-z-0-9]/g);\n  const reg2 = new RegExp(/[A-Z]{2,}/g);\n  const reg3 = new RegExp(/[0-9]{4,}/g);\n\n  const signupHandler = e => {\n    e.preventDefault();\n    const {\n      username,\n      email,\n      password\n    } = e.target;\n\n    if (username.value.length > 12) {\n      alert('Имя должно содержать менее 12 символов');\n      return false;\n    }\n\n    if (password.value.length > 24) {\n      alert('Пароль должен содержать менее 24 символов');\n      return false;\n    } else if (password.value.length < 8) {\n      alert('Пароль должен содержать более 8 символов');\n      return false;\n    } else if (password.value.match(reg1)) {\n      alert('В пароле используются спецсимволы!');\n      return false;\n    } else if (!password.value.match(reg2)) {\n      alert('В пароле должны содержаться 2 и более заглавные буквы');\n      return false;\n    } else if (!password.value.match(reg3)) {\n      alert('В пароле должны содержаться 4 и более цифры');\n      return false;\n    }\n\n    if (first_password.current.value === repeat_password.current.value) {\n      fetch('/signup', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'Application/json'\n        },\n        body: JSON.stringify({\n          username: username.value,\n          email: email.value,\n          password: password.value\n        })\n      }).then(res => res.json()).then(data => {\n        console.log(data);\n\n        if (data) {\n          localStorage.setItem('token', data.token);\n          dispatch({\n            type: \"SIGNUP\",\n            payload: data.user\n          }); // return history.push('/profile')\n        } else {\n          alert(data.message);\n        }\n      });\n    } else {\n      alert(\"Пароли не совпали!\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: signupHandler,\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        margin: \"50% auto\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://www.imaswmp.in/wp-content/uploads/default-avatar.jpg\",\n        style: {\n          height: \"100px\",\n          borderRadius: \"100px\"\n        },\n        alt: \"image1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          margin: \"20px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"username\",\n          placeholder: \"Username\",\n          style: {\n            marginBottom: \"10px\",\n            height: \"1.3rem\"\n          },\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          type: \"email\",\n          placeholder: \"Email\",\n          style: {\n            marginBottom: \"10px\",\n            height: \"1.3rem\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: first_password,\n          name: \"password\",\n          type: \"password\",\n          placeholder: \"Password\",\n          style: {\n            marginBottom: \"10px\",\n            height: \"1.3rem\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: repeat_password,\n          name: \"repeat_password\",\n          type: \"password\",\n          placeholder: \"Repeat password\",\n          style: {\n            height: \"1.3rem\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Signup\",\n        style: {\n          background: \"white\",\n          border: \"1px solid #40cfff\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Signup, \"Hs3lbz9jp11Nb/M4YhSlx76bQs0=\", false, function () {\n  return [useDispatch, useHistory];\n});\n\n_c = Signup;\nexport default Signup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["/Users/kristinabelyakova/react-auth/front/src/components/Signup.js"],"names":["React","useRef","useDispatch","useHistory","Signup","props","dispatch","history","first_password","repeat_password","reg1","RegExp","reg2","reg3","signupHandler","e","preventDefault","username","email","password","target","value","length","alert","match","current","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","localStorage","setItem","token","type","payload","user","message","display","flexDirection","justifyContent","alignItems","margin","height","borderRadius","marginBottom","background","border"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\n\n\nfunction Signup(props) {\n\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const first_password = useRef()\n  const repeat_password = useRef()\n\n  const reg1 = new RegExp(/[^A-Z-a-z-0-9]/g)\n  const reg2 = new RegExp(/[A-Z]{2,}/g)\n  const reg3 = new RegExp(/[0-9]{4,}/g)\n\n  const signupHandler = (e) => {\n    e.preventDefault()\n    const { username, email, password } = e.target\n    if (username.value.length > 12) {\n      alert('Имя должно содержать менее 12 символов')\n      return false;\n    }\n    if (password.value.length > 24) {\n      alert('Пароль должен содержать менее 24 символов')\n      return false;\n    } else if (password.value.length < 8) {\n      alert('Пароль должен содержать более 8 символов')\n      return false;\n    } else if (password.value.match(reg1)) {\n      alert('В пароле используются спецсимволы!')\n      return false;\n    } else if (!password.value.match(reg2)) {\n      alert('В пароле должны содержаться 2 и более заглавные буквы')\n      return false;\n    } else if (!password.value.match(reg3)) {\n      alert('В пароле должны содержаться 4 и более цифры')\n      return false;\n    }\n    if (first_password.current.value === repeat_password.current.value) {\n      fetch('/signup', {\n        method: 'POST',\n        headers: { 'Content-Type': 'Application/json' },\n        body: JSON.stringify({ username: username.value, email: email.value, password: password.value })\n      })\n        .then(res => res.json())\n        .then(data => {\n          console.log(data);\n          if (data) {\n            localStorage.setItem('token', data.token);\n            dispatch({ type: \"SIGNUP\", payload: data.user });\n            // return history.push('/profile')\n          } else {\n            alert(data.message)\n          }\n        })\n    } else {\n      alert(\"Пароли не совпали!\")\n    }\n  }\n\n  return (\n    <div>\n      <form onSubmit={signupHandler} style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\", margin: \"50% auto\" }}>\n        <img src=\"https://www.imaswmp.in/wp-content/uploads/default-avatar.jpg\" style={{ height: \"100px\", borderRadius: \"100px\" }} alt=\"image1\" />\n        <div style={{ display: \"flex\", flexDirection: \"column\", justifyContent: \"center\", alignItems: \"center\", margin: \"20px\" }}>\n          <input name=\"username\" placeholder=\"Username\" style={{ marginBottom: \"10px\", height: \"1.3rem\" }} autoFocus />\n          <input name=\"email\" type=\"email\" placeholder=\"Email\" style={{ marginBottom: \"10px\", height: \"1.3rem\" }} />\n          <input ref={first_password} name=\"password\" type=\"password\" placeholder=\"Password\" style={{ marginBottom: \"10px\", height: \"1.3rem\" }} />\n          <input ref={repeat_password} name=\"repeat_password\" type=\"password\" placeholder=\"Repeat password\" style={{ height: \"1.3rem\" }} />\n        </div>\n        <input type=\"submit\" value=\"Signup\" style={{ background: \"white\", border: \"1px solid #40cfff\" }} />\n      </form>\n    </div>\n  );\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}